{"version":3,"sources":["App.js","index.js"],"names":["App","webcamRef","useRef","canvasRef","useState","model","setModel","a","tf","console","log","useEffect","then","loadModel","detect","current","video","readyState","cakeTensor","fromPixels","resized","resizeBilinear","expand_1","expand_2","predict","obj","element","document","getElementById","innerHTML","Math","ceil","dataSync","dict","0","1","2","3","4","max_elem","max","apply","index","indexOf","className","ref","muted","style","position","marginLeft","marginRight","left","right","textAlign","zindex","width","height","onClick","top","fontSize","id","background","bottom","ReactDOM","render","StrictMode"],"mappings":"kaAgIeA,MA1Hf,WACE,IAAMC,EAAYC,iBAAO,MACnBC,EAAYD,iBAAO,MAFZ,EAIaE,qBAJb,mBAINC,EAJM,KAICC,EAJD,iDAMb,4BAAAC,EAAA,+EAEwBC,IAAkB,2BAF1C,OAEUH,EAFV,OAGIC,EAASD,GACTI,QAAQC,IAAI,sBAJhB,gDAOID,QAAQC,IAAR,MAPJ,0DANa,sBAkBbC,qBAAU,WACRH,MAAWI,MAAK,YAnBL,mCAoBXC,QAEC,IAEH,IAAMC,EAAM,uCAAG,WAAOT,GAAP,iCAAAE,EAAA,yDAGkB,qBAAtBN,EAAUc,SACK,OAAtBd,EAAUc,SAC6B,IAAvCd,EAAUc,QAAQC,MAAMC,WALb,wBAQLD,EAAQf,EAAUc,QAAQC,MAC1BE,EAAaV,IAAWW,WAAWH,GACnCI,EAAUZ,IAASa,eAAeH,EAAY,CAAC,IAAK,MACpDI,EAAWd,IAAcY,EAAS,GAClCG,EAAWf,IAAcc,EAAU,GAZ9B,SAaOjB,EAAMmB,QAAQD,GAbrB,OAaLE,EAbK,QAePC,EAAUC,SAASC,eAAe,gBAC9BC,UAAY,QAASC,KAAKC,KAAyB,IAApBN,EAAI,GAAGO,YAC1CP,EAAI,GAAGO,WAAW,GAAKP,EAAI,GAAGO,WAAW,GAE3CN,EAAQG,WAAa,qBAGrBH,EAAQG,WAAa,uBAEnBI,EAAO,CACTC,EAAG,QACHC,EAAG,QACHC,EAAG,QACHC,EAAG,SACHC,EAAG,UAGCC,EAAWT,KAAKU,IAAIC,MAAMX,KAAML,EAAI,GAAGO,YACvCU,EAAQjB,EAAI,GAAGO,WAAWW,QAAQJ,GACxCb,EAAQG,WAAa,eAAsBI,EAAKS,GAlCrC,4CAAH,sDA0CZ,OACE,yBAAKE,UAAU,OACb,4BAAQA,UAAU,cAChB,kBAAC,IAAD,CACEC,IAAK5C,EACL6C,OAAO,EACPC,MAAO,CACLC,SAAU,WACVC,WAAY,OACZC,YAAa,OACbC,KAAM,EACNC,MAAO,EACPC,UAAW,SACXC,OAAQ,EACRC,MAAO,IACPC,OAAQ,OAGZ,4BACEX,IAAK1C,EACL4C,MAAO,CACLC,SAAU,WACVC,WAAY,OACZC,YAAa,OACbC,KAAM,EACNC,MAAO,EACPC,UAAW,SACXC,OAAQ,EACRC,MAAO,IACPC,OAAQ,OAGZ,4BAAQC,QApCA,WACZ3C,EAAOT,IAoCD0C,MAAO,CACLC,SAAU,WACVU,IAAK,KACLH,MAAO,QACPC,OAAQ,OACRG,SAAU,KANd,WAUA,yBAAKC,GAAG,cACNb,MAAO,CACLQ,MAAO,QACPC,OAAQ,QACRK,WAAY,QACZb,SAAU,WACVc,OAAQ,WCnHpBC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFtC,SAASC,eAAe,W","file":"static/js/main.8eef91c8.chunk.js","sourcesContent":["// Import dependencies\r\nimport React, { useRef, useState, useEffect } from \"react\";\r\nimport * as tf from \"@tensorflow/tfjs\";\r\nimport Webcam from \"react-webcam\";\r\nimport \"./App.css\";\r\n\r\nfunction App() {\r\n  const webcamRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n\r\n  const [model, setModel] = useState();\r\n\r\n  async function loadModel() {\r\n    try {\r\n      const model = await tf.loadGraphModel(\"./tfjs_model/model.json\");\r\n      setModel(model);\r\n      console.log(\"Load model success\")\r\n    }\r\n      catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  //React Hook\r\n  useEffect(()=>{\r\n    tf.ready().then(()=>{\r\n    loadModel()\r\n    });\r\n  }, [])\r\n\r\n  const detect = async (model) => {\r\n    // Check data is available\r\n    if (\r\n      typeof webcamRef.current !== \"undefined\" &&\r\n      webcamRef.current !== null &&\r\n      webcamRef.current.video.readyState === 4\r\n    ) {\r\n\r\n      const video = webcamRef.current.video;\r\n      const cakeTensor = tf.browser.fromPixels(video);\r\n      const resized = tf.image.resizeBilinear(cakeTensor, [198, 198])\r\n      const expand_1 = tf.expandDims(resized, 0);\r\n      const expand_2 = tf.expandDims(expand_1, 0);\r\n      const obj = await model.predict(expand_2);\r\n\r\n      let element = document.getElementById(\"Result_text\");\r\n      element.innerHTML = \"Age: \"+ Math.ceil(obj[0].dataSync() * 116.0)\r\n      if (obj[1].dataSync()[0] > obj[1].dataSync()[1])\r\n      {\r\n        element.innerHTML += \"<br />\" + \"Gender: Male\";\r\n      } else \r\n      {\r\n        element.innerHTML += \"<br />\" + \"Gender: Female\";\r\n      }\r\n      var dict = {\r\n        0: 'white', \r\n        1: 'black', \r\n        2: 'asian', \r\n        3: 'indian', \r\n        4: 'others'\r\n      };\r\n      \r\n      const max_elem = Math.max.apply(Math, obj[2].dataSync());\r\n      const index = obj[2].dataSync().indexOf(max_elem);\r\n      element.innerHTML += \"<br />\" + \"Race: \" + dict[index];\r\n    }\r\n  };\r\n\r\n  const shoot = () => {\r\n    detect(model);\r\n}\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <Webcam\r\n          ref={webcamRef}\r\n          muted={true} \r\n          style={{\r\n            position: \"absolute\",\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n            left: 0,\r\n            right: 0,\r\n            textAlign: \"center\",\r\n            zindex: 9,\r\n            width: 640,\r\n            height: 480,\r\n          }}\r\n        />\r\n        <canvas\r\n          ref={canvasRef}\r\n          style={{\r\n            position: \"absolute\",\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n            left: 0,\r\n            right: 0,\r\n            textAlign: \"center\",\r\n            zindex: 8,\r\n            width: 640,\r\n            height: 480,\r\n          }}\r\n        />\r\n        <button onClick={shoot} \r\n          style={{\r\n            position: \"absolute\", \r\n            top: \"0%\", \r\n            width: \"100px\", \r\n            height: \"40px\",\r\n            fontSize: 20,\r\n          }}>\r\n          Predict\r\n        </button>\r\n        <div id=\"Result_text\"\r\n          style={{\r\n            width: \"300px\",\r\n            height: \"100px\",\r\n            background: \"black\",\r\n            position: \"absolute\",\r\n            bottom: \"0%\",\r\n          }}>\r\n        </div>\r\n      </header>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}